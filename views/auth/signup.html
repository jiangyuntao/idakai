<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="UTF-8">
{% if success %}<meta http-equiv="refresh" content="2; url=/i/home" />{% endif %}
<title>新用户注册_大开网</title>
<link media="all" rel="stylesheet" href="/stylesheets/style.css" type="text/css" />
</head>
<body>

{% include 'public/header.html' %}

<div class="container">
  <div class="row-fluid">
    <div class="span9">
      <div class="block">
        <div class="title">
          <h5>新用户注册</h5>
        </div>

        {% if success %}
        <div class="alert alert-success">
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          {{ success }}
        </div>
        {% endif %}

        {% if error %}
        <div class="alert alert-error">
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          {{ error }}
        </div>
        {% endif %}

        <form id="signup-form" class="form-horizontal" method="POST" action="">
          <div class="control-group">
            <label class="control-label" for="username">用户名：</label>
            <div class="controls">
              <input type="text" id="username" name="username" placeholder="您在网站的标识，可用来登录" value="{{ username }}" tabindex="1" />
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="password">密码：</label>
            <div class="controls">
              <input type="password" id="password" name="password" placeholder="密码必须在6位以上" tabindex="2" />
              <span class="help-inline">
                <a id="password-display-toggle" href="javascript:;">显示密码</a>
              </span>
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="email">邮箱：</label>
            <div class="controls">
              <input type="text" id="email" name="email" placeholder="常用邮箱，如 @qq.com" value="{{ email }}" tabindex="3" />
            </div>
          </div>
          <!--
          <div class="control-group">
            <label class="control-label" for="captcha">验证码：</label>
            <div class="controls">
              <input type="text" id="captcha" class="input-small" name="captcha">
              &nbsp;
              <a href="javascript:;" title="看不清？换一张！" id="refresh_captcha"><img id="captcha_image" src="/captcha" /></a>
            </div>
          </div>
          -->
          <div class="form-actions">
            <input type="submit" class="btn btn-success" value="注册成为会员" tabindex="4" />
          </div>
        </form>

      </div>
    </div>

    <div class="span3">
      <div class="block">
        <div class="title">
          <h5>已经有帐号？请直接登录</h5>
        </div>
        <a class="btn btn-success" href="/signin">登录</a>
      </div>

      <div class="block">
        <div class="title">
          <h5>关于大开网</h5>
        </div>
        <p>
        大开网是大连开发区本地的社交网站
        </p>
        <p>
        <a class="btn btn-small" href="/about">关于我们</a>
        </p>
      </div>
    </div>
  </div>
</div>

{% include 'public/footer.html' %}

<script src="/javascripts/jquery.validate.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
    $('#username').focus();
    /**
    $('#refresh_captcha').click(function() {
        $('#captcha_image').attr('src', '/captcha/' + Math.random());
    });
    $('#signup-form').validate({
        rules: {
            username: "required",
            password: {
                required: true,
                minlength: 6
            },
            email: {
                required: true,
                email: true
            },
            captcha: "required"
        },
        messages: {
            username: "请输入用户名",
            password: {
                required: "请输入密码",
                minlength: "请输入至少6位密码"
            },
            email: {
                required: "请输入邮箱",
                email: "请输入正确的邮箱"
            },
            captcha: "请输入验证码"
        }
    });
    /**/
    $('#password-display-toggle').click(function() {
        if ($('#password').prop('type') == 'password') {
            $('#password').prop('type', 'text');
            $(this).html('隐藏密码');
        } else {
            $('#password').prop('type', 'password');
            $(this).html('显示密码');
        }
    });
});
</script>

</body>
</html>
